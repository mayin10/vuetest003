import{a as h}from"./axios-c0bebe37.js";import{_ as y,r,o,c as d,f as a,g as l,k as m,h as c,t as _,a as g,F as L,e as F}from"./index-85211e2e.js";const A={data(){return{api:"http://127.0.0.1:8000/dmsAPi/folder/",datalist:[],fileApi:"http://127.0.0.1:8000/dmsAPi/file/",fileDatalist:[],treeData:[]}},created(){this.getDataList()},methods:{getDataList(){h({url:this.api,method:"get",headers:{Authorization:"Token "+localStorage.token}}).then(t=>{this.datalist=t.data.results,this.getFileDataList()}).catch(t=>{})},getFileDataList(){h({url:this.fileApi,method:"get",headers:{Authorization:"Token "+localStorage.token}}).then(t=>{this.fileDatalist=t.data.results,this.getTreeList()}).catch(t=>{})},getTreeList(){this.datalist.forEach((e,n)=>{e.fileList=this.fileDatalist.filter(f=>f.folder==e.id)});let t=this.datalist.filter(e=>e.p_id==0);t.forEach(e=>{e.children=this.datalist.filter(n=>n.p_id==e.id)}),this.treeData=t}}};function T(t,e,n,f,k,v){const D=r("el-descriptions"),s=r("el-table-column"),p=r("el-tag"),b=r("el-button"),w=r("el-table"),x=r("el-card");return o(),d("div",null,[a(x,null,{default:l(()=>[a(D,{title:"Folder Info"}),a(w,{data:k.treeData,stripe:"",style:{width:"100%"},"row-key":"id",border:""},{default:l(()=>[a(s,{type:"index"}),a(s,{label:"Forder Name",prop:"folder_name",width:"400px"},{default:l(i=>[i.row.level===0?(o(),m(p,{key:0,size:"large"},{default:l(()=>[c(_(i.row.folder_name),1)]),_:2},1024)):(o(),m(p,{key:1,type:"success"},{default:l(()=>[c(_(i.row.folder_name),1)]),_:2},1024))]),_:1}),a(s,{label:"",width:"150px"},{default:l(i=>[a(b,{type:"warning",size:"mini",onClick:e[0]||(e[0]=()=>{})},{default:l(()=>[c("Upload")]),_:1})]),_:1}),a(s,{label:"Files"},{default:l(i=>[g("div",null,[g("ul",null,[(o(!0),d(L,null,F(i.row.fileList,u=>(o(),d("li",{key:u.id},_(u.file_name),1))),128))])])]),_:1})]),_:1},8,["data"])]),_:1})])}const N=y(A,[["render",T]]);export{N as default};
